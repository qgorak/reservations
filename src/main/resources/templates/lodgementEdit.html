{{> include/header}}
{{> include/menu/menuLodgementDashboard}}
{{> include/modals/confirmDeletePhotoModal}}
<v-container div="container" style="height: 1500px;">
   <v-row dense>
      <v-col cols="12">
         <v-card
            class="mx-auto"
            >
            <v-toolbar
               flat
               dense
               >
               <v-toolbar-title>
                  <span class="subheading">Titre de l'annonce</span>
               </v-toolbar-title>
            </v-toolbar>
            <v-card-text>
               <v-text-field
                  v-model="lodgement.title"
                  style="max-width:600px;"
                  solo
                  ></v-text-field>
            </v-card-text>
         </v-card>
      </v-col>
   </v-row>
   <v-row dense>
      <v-col cols="12">
         <v-card
            class="mx-auto"
            >
            <v-toolbar
               flat
               dense
               >
               <v-toolbar-title>
                  <span class="subheading">Type</span>
               </v-toolbar-title>
            </v-toolbar>
            <v-card-text>
               <%lodgement.type%>
            </v-card-text>
            <v-toolbar
               flat
               dense
               >
               <v-toolbar-title>
                  <span class="subheading">Caractéristiques</span>
               </v-toolbar-title>
            </v-toolbar>
            <v-card-text>
               <%lodgement.nbr_place%> voyageurs, <%lodgement.nbr_room%> pièce(s)
            </v-card-text>
         </v-card>
      </v-col>
   </v-row>
   <v-row dense>
      <v-col cols="12">
         <v-card
            class="mx-auto"
            >
            <v-toolbar
               flat
               dense
               >
               <v-toolbar-title>
                  <span class="subheading">Prix par nuit</span>
               </v-toolbar-title>
            </v-toolbar>
            <v-card-text>
               <v-row
                  class="mb-4"
                  justify="space-between"
                  >
                  <v-col class="text-left">
                     <span
                        class="display-3 font-weight-light"
                        v-text="lodgement.price"
                        ></span>
                     <span class="subheading font-weight-light mr-1">€ par nuit</span>
                  </v-col>
               </v-row>
               <v-slider
                  style="max-width:600px;"
                  v-if="lodgement.price!=null"
                  v-model="lodgement.price"
                  max="400"
                  >
                  <template v-slot:prepend>
                     <v-icon
                        >
                        mdi-minus
                     </v-icon>
                  </template>
                  <template v-slot:append>
                     <v-icon
                        >
                        mdi-plus
                     </v-icon>
                  </template>
               </v-slider>
            </v-card-text>
         </v-card>
      </v-col>
   </v-row>
   <v-spacer></v-spacer>
   <v-row dense>
      <v-col cols="12">
         <v-card
            class="mx-auto"
            >
            <v-toolbar
               flat
               dense
               >
               <v-toolbar-title>
                  <span class="subheading">Description du logement</span>
               </v-toolbar-title>
            </v-toolbar>
            <v-card-text>
               <v-textarea
                  solo
                  label="Description du logement"
                  style="max-width:600px;"
                  no-resize
                  v-model="lodgement.description"
                  ></v-textarea>
            </v-card-text>
            <v-divider></v-divider>
            <v-card-text>
               <v-btn  color="green" @click="updateLodgement(lodgement)" >Mettre à jour l'annonce</v-btn>
            </v-card-text>
         </v-card>
      </v-col>
   </v-row>
   <v-row dense>
   </v-row>
   <v-data-iterator
      :items="images"
      hide-default-footer
      >
      <template v-slot:header>
         <v-toolbar
            class="mb-2"
            color="indigo darken-5"
            dark
            flat
            >
            <v-toolbar-title>Photos de l'annonce</v-toolbar-title>
         </v-toolbar>
      </template>
      <template v-slot:default="props">
         <v-row>
            <v-col
               v-for="item in props.items"
               :key="item.name"
               cols="12"
               sm="6"
               md="4"
               lg="3"
               >
               <v-card>
                  <v-img
                     max-height="auto"
                     max-width="auto"
                     :src=item.src
                     ></v-img>
                  <v-divider></v-divider>
                  <v-list dense>
                     <v-list-item>
                        <%item.name%>
                     </v-list-item>
                     <v-list-item>
                        <v-list-item-content class="align-end">
                           <v-btn  small @click="confirmDelete(item)" depressed>Supprimer</v-btn>
                        </v-list-item-content>
                     </v-list-item>
                  </v-list>
               </v-card>
            </v-col>
         </v-row>
      </template>
      <template v-slot:footer>
         <v-toolbar
            class="mt-2"
            color="indigo"
            dark
            flat
            >
            Ajouter une photo
            <v-file-input
               v-model="file"
               accept="image/*"
               ></v-file-input>
            <v-btn v-if="file != null" @click="postPhotoLodgement()">Ajouter</v-btn>
         </v-toolbar>
      </template>
   </v-data-iterator>
   <v-btn v-if="lodgement.status=='ONLINE'" color="green" @click="lodgement.status='OFFLINE';updateLodgement(lodgement)" >Desactiver l'annonce</v-btn>
   <v-btn v-if="lodgement.status=='OFFLINE'" color="green" @click="lodgement.status='ONLINE';updateLodgement(lodgement)" >Mettre l'annonce en ligne</v-btn>
</v-container>
{{> include/footer}}