<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Reservation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vuetify/2.2.12/vuetify.min.css" />
    <link href='https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons' rel="stylesheet">  
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vuetify/2.2.12/vuetify.min.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css" rel="stylesheet">
	<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
	<link href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" rel="stylesheet"/>
	<link rel="stylesheet" href="/css/style.css">
</head>
<body id="application">
<v-app>
<v-navigation-drawer
   v-model="drawer"
   absolute
   left
   temporary>
   <v-list-item>
      <v-list-item-content>
         <v-list-item-title class="title">
		<v-avatar
  		color="primary"
  		size="56">        <img
          v-bind:src="'/user-photos/'+user+'/avatar/avatar.png'"
          alt="John"
        ></v-avatar>
            <%user%>
         </v-list-item-title>
         <v-list-item-subtitle>
            <v-dialog
               v-model="loginModal"
               persistent
               max-width="290"
               >
               <v-card>
                  <v-card-title class="headline">
                     Login
                  </v-card-title>
                  <v-card-text>
                     <form  method="post" action="/login">
                        <p>
                           <label for="username" class="sr-only">Username</label>
                           <input type="text" id="username" name="username" placeholder="Username" required autofocus>
                        </p>
                        <p>
                           <label for="password" class="sr-only">Password</label>
                           <input type="password" id="password" name="password"  placeholder="Password" required>
                        </p>
                  </v-card-text>
                  <v-card-actions>
                  <v-spacer></v-spacer>
                  <v-btn
                     color="green darken-1"
                     text
                     @click="loginModal = false"
                     >
                  Cancel
                  </v-btn>
                  <v-btn
                     color="green darken-1"
                     text
                     type="submit"
                     @click="loginModal = false"
                     >
                  Login
                  </v-btn>
                  </form>
                  </v-card-actions>
               </v-card>
            </v-dialog>
            <v-dialog
               v-model="registerModal"
               persistent
               max-width="600"
               >
               <template v-slot:activator="{ on, attrs }">
               </template>
               <v-card>
                  <v-card-title class="headline">
                     Register
                  </v-card-title>
                  <v-card-text>
                     <v-stepper v-model="e1">
                        <v-stepper-header>
                           <v-stepper-step
                              :complete="e1 > 1"
                              step="1"
                              >
                              e-mail
                           </v-stepper-step>
                           <v-divider></v-divider>
                           <v-stepper-step
                              :complete="e1 > 2"
                              step="2"
                              >
                              username
                           </v-stepper-step>
                           <v-divider></v-divider>
                           <v-stepper-step step="3">
                              details
                           </v-stepper-step>
                        </v-stepper-header>
                        <v-stepper-items>
                           <v-form v-model="valid">
                           <v-stepper-content step="1">
                              <v-card
                                 class="mb-12"
                                 color="grey lighten-1"
                                 height="200px"
                                 >
            <v-text-field
              v-model="newUser.mail"
              :rules="emailRules"
              label="E-mail"
              required
            ></v-text-field>
                              </v-card>
                              <v-btn
                                 color="primary"
                                 @click="e1 = 2"
                                 >
                                 Continue
                              </v-btn>
                              <v-btn
                              @click="registerModal = false"
                               text>
                                 Cancel
                              </v-btn>
                           </v-stepper-content>
                           <v-stepper-content step="2">
                              <v-card
                                 class="mb-12"
                                 color="grey lighten-1"
                                 height="200px"
                                 >
                             <v-text-field
                                    v-model="newUser.login"
                                    :rules="usernameRules"
                                    :counter="10"
                                    label="Username"
                                    required
                                    ></v-text-field>
                                    </v-card>
                              <v-btn
                                 color="primary"
                                 @click="e1 = 3"
                                 >
                                 Continue
                              </v-btn>
                              <v-btn
                              @click="registerModal = false"
                               text>
                                 Cancel
                              </v-btn>
                           </v-stepper-content>
                           <v-stepper-content step="3">
                              <v-card
                                 class="mb-12"
                                 color="grey lighten-1"
                                 height="200px"
                                 >
                                 
                                             <v-text-field
              v-model="newUser.password"
              :rules="passwordRules"
              :counter="10"
              label="Password"
              required
            ></v-text-field>
                        <v-text-field
              v-model="passwordConfirm"
              :rules="passwordRules"
              :counter="10"
              label="Confirm password"
              required
            ></v-text-field></v-card>
                              <v-btn
                                 color="primary"
                                 @click="registerUser()"
                                 >
                                 Continue
                              </v-btn>
                              <v-btn 
                              @click="registerModal = false"
                              text>
                                 Cancel
                              </v-btn>
                           </v-stepper-content>
                        </v-stepper-items>
                     </v-stepper>
                  </v-card-text>
               </v-card>
            </v-dialog>
         </v-list-item-subtitle>
      </v-list-item-content>
   </v-list-item>
   <v-divider></v-divider>
   <v-list
      dense
      nav
      >
      <v-list-item
         v-for="item in items"
         :key="item.title"
         :href="item.link"
         @click="triggerModal(item.action)"
         link
         >
         <v-list-item-icon>
            <v-icon><%item.icon%></v-icon>
         </v-list-item-icon>
         <v-list-item-content>
            <v-list-item-title><%item.title%></v-list-item-title>
         </v-list-item-content>
      </v-list-item>
   </v-list>
</v-navigation-drawer>

    
