<v-dialog
   v-model="modalLodgement"
   persistent
   fullscreen
   >
   <v-card>
      <v-card-title class="headline">
         Ajoutons ensemble un logement
      </v-card-title>
      <v-stepper v-model="e1" >
         <v-stepper-header>
            <v-stepper-step
               :complete="e1 > 1"
               step="1"
               >
               Type de logement
            </v-stepper-step>
            <v-divider></v-divider>
            <v-stepper-step
               :complete="e1 > 2"
               step="2"
               >
               Description
            </v-stepper-step>
            <v-divider></v-divider>
            <v-stepper-step
               :complete="e1 > 3"
               step="3"
               >
               localisation
            </v-stepper-step>
            <v-divider></v-divider>
            <v-stepper-step 
               :complete="e1 > 4"
               step="4">
               Capacit√©
            </v-stepper-step>
            <v-divider></v-divider>
            <v-stepper-step step="5">
               Photos
            </v-stepper-step>
         </v-stepper-header>
         <v-stepper-items>
            <v-stepper-content step="1">
               <v-card
                  class="mb-12"
                  color="grey lighten-1"
                  height="200px"
                  >
                  <v-row justify="center">
                     <v-select
                        :items="type"
                        v-model="newLodgement.type"
                        label="Type"
                        ></v-select>
                  </v-row>
               </v-card>
               <v-btn
                  color="primary"
                  @click="e1 = 2"
                  >
                  Continue
               </v-btn>
               <v-btn  @click="modalLodgement = false" text>
                  Cancel
               </v-btn>
            </v-stepper-content>
            <v-stepper-content step="2">
               <v-card
                  class="mb-12"
                  color="grey lighten-1"
                  height="400px"
                  >
                  <v-row justify="center">
                     <v-text-field
                        v-model="newLodgement.title"
                        :counter="10"
                        label="Title"
                        required
                        ></v-text-field>
                  </v-row>
                  <v-divider></v-divider>
                  <v-row justify="center">
                     <v-textarea
                        v-model="newLodgement.description"
                        label="Description"
                        value="Parlez nous un peu du logement"
                        hint="Hint text"
                        ></v-textarea>
                  </v-row>
               </v-card>
               <v-btn
                  color="primary"
                  @click="e1 = 3"
                  >
                  Continue
               </v-btn>
               <v-btn text>
                  Cancel
               </v-btn>
            </v-stepper-content>
            <v-stepper-content step="3">
               <v-card
                  class="mb-12"
                  color="grey lighten-1"
                  height="200px"
                  >
                  <v-row justify="center">
                     <v-autocomplete
                        v-model="selected"
                        label="Adresse"
                        name="location"
                        v-on:keyup="suggestion"
                        :items="search"
                        item-text="properties.name"
                        return-object
                        >
                        <template v-slot:selection="data">
                           <v-chip
                              v-bind="data.attrs"
                              :input-value="data.selected"
                              close
                              @click="data.select"
                              @click:close="remove(data.item)"
                              >
                              <% data.item.properties.name %>
                           </v-chip>
                        </template>
                        <template v-slot:item="data">
                           <template v-if="typeof data.item !== 'object'">
                              <v-list-item-content v-text="data.item"></v-list-item-content>
                           </template>
                           <template v-else>
                              <v-list-item-content>
                                 <v-list-item-title v-html="data.item.properties.name"></v-list-item-title>
                                 <v-list-item-subtitle v-html="data.item.properties.postcode"></v-list-item-subtitle>
                              </v-list-item-content>
                           </template>
                        </template>
                     </v-autocomplete>
                  </v-row>
               </v-card>
               <v-btn
                  color="primary"
                  @click="e1 = 4"
                  >
                  Continue
               </v-btn>
               <v-btn text>
                  Cancel
               </v-btn>
            </v-stepper-content>
            <v-stepper-content step="4">
               <v-card
                  class="mb-12"
                  color="grey lighten-1"
                  height="200px"
                  >
                  <v-row justify="center">
                     <v-select
                        :items="nbr"
                        v-model="newLodgement.nbr_room"
                        label="Nombre de chambre"
                        ></v-select>
                  </v-row>
                  <v-row justify="center">
                     <v-select
                        :items="nbr"
                        v-model="newLodgement.nbr_place"
                        label="nombre de place"
                        ></v-select>
                  </v-row>
               </v-card>
               <v-btn
                  color="primary"
                  @click="postLodgement()"
                  >
                  Suivant
               </v-btn>
               <v-btn text>
                  Cancel
               </v-btn>
            </v-stepper-content>
            <v-stepper-content step="5">
               <v-card
                  class="mb-12"
                  color="grey lighten-1"
                  >
                  <v-data-iterator
                     :items="draftImages"
                     hide-default-footer
                     >
                     <template v-slot:header>
                        <v-toolbar
                           class="mb-2"
                           color="indigo darken-5"
                           dark
                           flat
                           >
                           <v-toolbar-title>Photos de l'annonce</v-toolbar-title>
                        </v-toolbar>
                     </template>
                     <template v-slot:default="props">
                        <v-row>
                           <v-col
                              v-for="item in props.items"
                              :key="item.name"
                              cols="12"
                              sm="6"
                              md="4"
                              lg="3"
                              >
                              <v-card>
                                 <v-img
                                    max-height="auto"
                                    max-width="auto"
                                    :src=item.src
                                    ></v-img>
                                 <v-divider></v-divider>
                                 <v-list dense>
                                    <v-list-item>
                                       <%item.name%>
                                    </v-list-item>
                                    <v-list-item>
                                       <v-list-item-content class="align-end">
                                          <v-btn  small @click="deleteDraftImage(item)" depressed>Supprimer</v-btn>
                                       </v-list-item-content>
                                    </v-list-item>
                                 </v-list>
                              </v-card>
                           </v-col>
                        </v-row>
                     </template>
                     <template v-slot:footer>
                        <v-toolbar
                           class="mt-2"
                           color="indigo"
                           dark
                           flat
                           >
                           Ajouter une photo (minimum 2 pour poster l'annonce)
                           <v-file-input
                              v-model="file"
                              accept="image/*"
                              ></v-file-input>
                           <v-btn v-if="file != null" @click="postPhotoLodgement()">Ajouter</v-btn>
                        </v-toolbar>
                     </template>
                  </v-data-iterator>
               </v-card>
               <v-btn
               	  v-if="draftImages.length>1"
                  color="primary"
                  @click="submitLodgement();modalLodgement=false;"
                  >
                  Post
               </v-btn>
               <v-btn 
                  @click="modalLodgement=false;"
                  text>
                  Cancel
               </v-btn>
            </v-stepper-content>
         </v-stepper-items>
      </v-stepper>
   </v-card>
</v-dialog>